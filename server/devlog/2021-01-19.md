# 2020 01 19
* docker mysql 

## docker mysql 
도커로 mysql을 만들어주기로 했다. ci/cd과정에서 테스트도중 사용하는 데이터베이스를 도커로 관리해주고 싶어서 일단 진행해보기로 했다. 

서버가 돌아가는 도커와 데이터베이스가 돌아가는 도커를 만들어주고 서로 연결해줘야하기 때문에 docker-compose파일을 작성해줘야 한다.

일단 도커로 뭘 해보기 전에 이전 도커로 실험해보느라 만들었던 수많은 이미지파일들을 전부 지워주었다. (진짜 많았다...)

여러 블로그들과 유튭들을 참고하여 해봤지만 잘 되지 않았다...

일단 AWS계정을 만들어주었다. (여차하면 database를 도커로 만들지 않고 rds로 바로 연결해주는 것을 생각했다... 하지만 과금은..?)

몇시간의 삽질끝에 일단 됬다! 근데 두 컨테이너 사이의 연결이 안된다.. 일단 문제는 간단했다. Dockerfile을 통해서 서버코드를 빌드해줘야하는데 docker-compose.yml파일이 있어 필요없는줄로만 알았다. 즉 계속 안됬던게 서버 코드를 어떻게 컨테이너화 시킬지 정하지 않아서 발생한 문제였다. (사실 이 설명이 맞는지 잘 모르겠다. 주말에 꼭 도커 공부를 해야겠다)

그래서 두 컨테이너가 생성된 사실을 확인했지만... 연결이 되지 않았다. links속성을 사용했지만 왜 안되는지 아직 잘 모르겠다. (도커 어렵다)

