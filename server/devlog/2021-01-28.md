# 2021 01 28
* 프로젝트 권한 수정 API 작성
* clip 생성 

## Clip 생성

처음 클립에 대해서 모호한 점이 있어 팀원과 상의해주었다. 
```
1. 공유클립의 저자는 보이지 않는다
2. 공유클립의 수정, 삭제는 모두가 가능하다
3. 공유클립의 순서또한 모두가 수정가능하다. 단 A가 변경한 경우 B의 화면에도 변경한 내용이 반영된다. 
```

클립은 팀원과 공유되는 클립, 개인 클립으로 나눠진다. 처음에는 user와 관계가 있으면 개인클립, 그렇지 않으면 공유 클립이라고 생각했다. 하지만 공유된 클립을 가져올 때 프로젝트 id만으로 가져오면 공유되지 않은 모든 클립이 가져와질 것 같다는 생각이 들었다. 조건에 user_id가 null인 것만 가져와라 라고 한다면 공용 클립을 가져올 수 있는지 확인하고 안된다면 isprivate column을 추가해 쿼리하는데 편리성을 더해줄 생각이다.

현재까지 생성된 클립의 갯수를 받아오는 메소드에서 `findAndCount`를 사용해주었고, 공유된 클립은 `user_id:null`을 사용해주었다. 정상적으로 작동될지 잘 모르겠다.

NaN에러가 발생했다. 아마 클립의 갯수를 받아오는 부분에서 문제가 있는것 같다 (처음 생성하는 부분이라서) 콘솔로 확인해보니 NaN이 나온다.

undefined의 경우 0이 나올수 있도록 수정해줘야한다. 

수정해주었지만 이제는 계속 0이 나온다. `findAndCount`가 문제인줄 알았자민 아니었다.
`await this.repository.findAndCount({user_id: user, project_id:proj})[1]` 이 부분이 문제였다. 
수정해주었더니 정상적으로 작동한다.