# 202 01 25
* 권한 관련 토의
* 프로젝트 삭제 API
* 프로젝트 권한 관련 API 정리


## 프로젝트 권한
**editor**
* 프로젝트 모든 수정, 생성 가능 
* 프로젝트 권한 위임 가능
* 프로젝트 삭제 가능 
* 프로젝트를 나가는 경우 
	* 혼자 있던 경우 프로젝트 삭제
	* 다른 editor가 있는경우 나가기
	* 유일한 editor가 나가는 경우 프로젝트 삭제 (경고문구 출력)

**noneditor**
* 프로젝트 컨텐츠(클립, 태스크) 수정, 생성 가능
* 프로젝트 이름, 설명 수정 불가
* 프로젝트 권한 위임 불가
* 프로젝트 삭제 불가
* 프로젝트 나가기 가능 

위처럼 진행하기로 했다. 

진행하면서 프로젝트 삭제하기 전에 해당 유저가 프로젝트를 수정할 권한이 있는지 판단할 수 있는 메소드를 어디에서 해야하는지 감이 오질 않았다. 정확히 말하면 어디에서 하는게 더 효율적인지 잘 모르겠다. 프로젝트를 삭제하는 메소드 안에서 할지, 프로젝트를 삭제하는 메소드를 호출하기 전에 에러처리를 할지 고민이었다. 일단 전자로 하기로 했다. 해당 메소드를 불리기 전에 하면서 밖에서 메소드를 노출시키는 것 보다 내부에서 하는게 보안상으로, 그리고 더 안정적일 것 같았다. (해당 메소드가 불릴때 무조건 불리도록)

이렇게 진행했을때는 역시 에러가 항상 문제다. 에러를 어떻게 보내야할지.. 

일단 `throw new Error`로 에러 처리를 해주고 어떤 에러인지는 나중에 테스트 케이스를 작성하면서 더 구체화 할 예정이다. (아직 어떤 에러들이 있는지 명확하지 않다. )

일단 delete기능은 제작했다. 정상적으로 프로젝트가 삭제되는 것을 봤다. 하지만 권한이 없는 사람이 삭제했을때 에러가 뜨는 것은 확인하지 못했다. 권한 추가 기능을 하지 못해서 그 기능을 만든 뒤 확인해줘야한다. 